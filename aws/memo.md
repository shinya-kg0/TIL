# NAT

Network Adress Translation


- IPアドレスを変換する技術
  - プライベートIPをネットワークに繋ぎたい時にNATを使うことで通信可能になる
  - 入力方向、出力方向の2種類ある

# NAPT

NATを拡張した感じ、ポートまで変更することで複数のIPをまとめることができる。

- プライベート側に複数IPがあってもポートで振り分けできる

# NATゲートウェイ

VPCからインターネットに出ていく１方向のみ通信をしたい時に使うもの

- ユースケース
  - ミドルウェアのインストール（yum, apt-get）
  - Dockerイメージをプルしたい（ECR, DockerHub）
  - **VPCに属さないAWSマネージドサービスと通信したい（S3, SecretsManager, ECRなど）**

- **VPCエンドポイント**との比較
  - AWSマネージドサービス（S3など）のみ通信するならこっち
  - 他にインターネットに出ることがあるならNATゲートウェイ


# Amazon GuardDuty（探偵・監視カメラ）

AWS 環境全体の「ログ」をAIや機械学習で分析し、普段と違う動きや悪意のある操作を**見つけ出す**サービスです。

* **何を見張るか：** 不正なログイン試行、身に覚えのない場所からの操作、ウイルス感染したサーバーの挙動など。
* **具体例：** 「あなたの EC2 インフラが、勝手に暗号資産（仮想通貨）のマイニングに使われていますよ！」「盗まれたパスワードで誰かがログインしましたよ！」といった警告を出してくれます。
* **アクション：** 基本は「通知」です。通知を受けて、人間やプログラムが対処します。

# AWS Shield（防波堤・ボディーガード）

Web サイトやサーバーをダウンさせようとする **DDoS（ディードス）攻撃**から**インフラを保護する**サービスです。

* **何を防ぐか：** 大量の偽アクセスを送りつけてサイトをパンクさせる攻撃。
* **具体例：** 悪意のある大量のトラフィックが来ても、正規のユーザーがサイトを見続けられるように、攻撃データだけを自動でカットしてくれます。
* **プラン：** * **Standard（無料）：** 全ユーザーに自動適用されており、一般的なネットワーク攻撃を防ぎます。
* **Advanced（有料）：** より高度な攻撃への対応、専門チームによるサポート、攻撃によるコスト増の補填などがあります。


## 主な違いの比較表

| 特徴 | Amazon GuardDuty | AWS Shield |
| --- | --- | --- |
| **主な目的** | **脅威検知**（異常な動きを見つける） | **DDoS 保護**（大量アクセスから守る） |
| **防御対象** | AWS アカウント、IAM、EC2、S3 など | ネットワーク、Webアプリケーション |
| **得意なこと** | 乗っ取り、マイニング、内部不正の検知 | 大規模なサーバーダウン攻撃の阻止 |
| **動作イメージ** | ログを分析して「怪しい」と知らせる | 攻撃を自動的に「受け流す・遮断する」 |
| **料金** | 分析したログ量に応じた従量課金 | Standard は無料（Advanced は定額） |
