# 「問題を切り分ける」について

[参考ページ](https://qiita.com/alpha2048/items/008e41457caee021fbe3)

問題解決には、**問題の原因を特定する → 解決策を探る**の2つのフェーズがある。  



## そもそも問題とは、、、  
→ ”**プロダクトが意図した通りに動いていない状態**”ことを指す

例）コードのエラー、環境設定のミス、データベースの権限回りなど

## 問題は主に内部要因
外部サービスを使っていて、外部サービスが落ちている状況など以外は、基本的に内部要因（自分やチームメンバーの変更）によるものである

内部要員の場合、今動いている環境を変更するこのになった際に発生する。
- 新しい機能の追加、既存機能改修、リファクタリングなどのコード変更
- ローカル、コンテナの設定ファイルの変更

自分の意図した（意図してない）変更で問題が起きている or メンバーの変更を取り込めていない

## 問題が起きた時にやること
### 落ち着く
焦ってしまってさらによく無いことをしてしまう（引き起こしてしまう）前に一度落ち着くのが意外と大事。  
やってしまった時こそ冷静に、客観的に物事を捉えていく。

### 今の状況を確認する
まずは自分の状況を整理する。
- 問題が発生するまでに自分がやっていたこと
- その問題が深刻そうかどうか
- その問題が解決するのにどれぐらいかかりそうか

他にも、バージョンや環境によって挙動が変わる場合もあるので、細かく状況を整理できると⚪︎

### (時間がかかりそう/わからないなら)上司に報告する
問題解決のあたりがつくようになるまでは、上司などに助けを求めるのは大事。  
ただ、その時にも上司がどう考えて問題を切り分け対処しているかを自分でもトレースできるように意識する。


## 問題を切り分けるためにやること
問題を切り分けるためには、そもそも条件を合わせたり丁寧に条件を積み上げていくことが大事。  
どこまで正常に動いていて、どこからおかしくなったのかなど（詰将棋みたいなイメージ）


### エラーメッセージを読む
丁寧にどの部分でエラーが起こっているかをチェックする。  
適宜、インタプリタで状況を再現したり実験するのも良い


### 差分をみる

問題が起きている状態と正しく動いている状態には必ず差分がある。

コード差分や環境差分を他の人や過去の自分と比べてみる


### 範囲を絞る
大きなコードだとどこに原因があるのかわかりにくい。  
そこで問題が起きている原因の範囲を絞ることが有効。（例えばログを仕込む）

問題の特定はかなり地道な作業だが、実は一番近道だったりする。

### 想像と事実を切り分ける
自分の思い込みでここは問題ないだろうというところはゼロにする。  
必ず、根拠を持って**ここには問題ないです**と言えるように。

ここは複数の角度から検証して問題ないと言えるという部分を地道に増やしていって、  
問題が潜んでいる範囲を絞り込んでいく。



## 問題が解決したら

### 解決手段をどこかに残す
解決手段に再利用性がありそうならメモなど何かしらの痕跡を残しておく

### リスケする
もし問題解決に多くの時間を使ってしまった場合、全体のスケジュールが遅れる可能性が高い。  
そこで、上司などに相談しスケジュールの見直しをする。




